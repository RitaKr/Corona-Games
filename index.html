<!DOCTYPE html>
<html lang="ua">
<head>
    <link rel="stylesheet" href="main.css">
    <link rel="shortcut icon" href="images/favicon.png" type="image/png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="jquery-3.3.1.js"></script>
    <title>CORONA-GAMES</title>
    <meta charset="utf-8">
</head>

<body>
<div id="header">
    <div id="hdiv1" class="hdiv">
        
        
        <div>
            <img src="images/covid.png" class="hdiv-img">
            <span class="hdiv-span">
                <h1>CORONA GAMES</h1>
                <h2>Що це таке?</h2>
                CORONA GAMES - проєкт, створений щоб допомогти Вам пережити пандемію коронавірусу
                та урізноманітнити ваші сірі будні на самоізоляції. На цьому сайті Ви можете скоротати 
                свій час у мінііграх і уявити себе супергероєм, що рятує світ від коронавірусу.
            </span>
        </div>
    
    </div>
    <div id="hdiv2" class="hdiv">
        
        <div>
            <img src="images/vaccine.png" class="hdiv-img">
            <span class="hdiv-span">
                <h1>CORONA GAMES</h1>
                <h2>У чому особливість цього проєкту?</h2>
                CORONA GAMES - не просто збірник ігор, це ціла ігрова структура зі своїм сюжетом, 
                ігровою валютою, системою рівнів і відслідковування ігрового прогресу. 
                <br><br>
                Сюжет побудований на тому, щоб здобувати у мінііграх інвентар, який можна інвестувати 
                у вакцину та вакцинувати мешканців різних крїн. 
                З кожною вакцинованою країною гравець переходить на новий рівень. 
                Але вакцинувати все населення буде складніше з кожним новим рівнем. 
                Гра вважатиметься пройденою, коли будуть вакциновані всі країни світу. 
            </span>
        </div>
    </div>
    <div id="hdiv3" class="hdiv">
        
        <div>
            <img src="images/trophy.png" class="hdiv-img">
            <span class="hdiv-span">
                <h1>CORONA GAMES</h1>
                <h2>Чи можу я відслідковувати свій прогрес?</h2>
                Звичайно! У кожній мінігрі Ви можете побачити Вашу статистику та рекорди у цій грі, 
                а також кількість вашого інвентарю. 
                Ви також можете подивитись повну статистику по всім іграм на головній сторінці.
            </span>
        </div>
    </div>
    <div id="hdiv4" class="hdiv">
        
        <div>
            <img src="images/controller.png" class="hdiv-img">
            <span class="hdiv-span">
                <h1>CORONA GAMES</h1>
                <h2>У що тут можна пограти?</h2>
                Ми пропонуємо Вам набір безкоштовних онлайн ігор власної реалізації: 
                COLOR WORDS, ROCK PAPER SCISSORS і BREAKOUT. 
                Наразі їх тільки 3, але плануються поповнення. 
                На цій сторінці Ви можете прочитати описи ігор 
                і перейти на кожну них.
                <br><br>
                 У процесі гри Ви будете отримувати досягнення й нагороди в ігровій валюті: 
                туалетний папір, маски й антисептики. 
                Їх можна використовувати тільки в межах цього сайту, 
                обмінюючи одне на одного або на додаткові "плюшки" у іграх..
            </span>
        </div>
    </div>
</div>
<div class="main" id="main">
    <h1>Оберіть гру</h1>
<div class="games-menu-container">
    <a class="games-menu-item-container" id="color-words" href="color-words/index.html" target="open-game-color-words">
        <div class="games-menu-item"  >
            <h2>Color Words</h2>    
        </div>
        <p class="games-menu-item-description" id="color-words-description" >
        У цій грі вам треба натискати на кнопку того кольору, який написаний зверху. 
        Головне не переплутати колір, яким слово ЗАФАРБОВАНО з кольором, який НАПИСАНО. 
            Гра має обмеження в часі - 30 секунд
        </p>
    </a>
    <a class="games-menu-item-container" id="rps" href="rock-paper-scissors/index.html" target="open-game-rps">
        <div class="games-menu-item"  >
            <h2>Rock Paper Scissors</h2>
        
        </div>
        <p class="games-menu-item-description" id="rps-description" >
            Класична гра "камінь ножиці папір", тільки Ваш суперник - комп'ютер. 
            Гра має обмеження у кількості раундів, тобто закінчується після завершення останнього раунду.
        </p>
    </a>
    <a class="games-menu-item-container" id="breakout" href="breakout/index.html" target="open-game-breakout">
        <div class="games-menu-item"  >
            <h2>Breakout</h2>
        
        </div>
        <p class="games-menu-item-description" id="breakout-description">
            В цій грі вам треба рухати дощечку внизу поля й відбивати кульку так, щоб вона розбивала цеглини вгорі поля й не падала вниз за межі дощечки.
        
        </p>
    </a>
</div>

<div id="stat-div">
    <h1>Ваша статистика</h1>
    <table class="stat-table">
        <tr>
            <th></th>
            <th>Color Words</th>
            <th>Rock Paper Scissors</th>
            <th>Breakout</th>
            
        </tr>
        <tr><th>Разів зіграно</th>
            <td id="CWtimesPlayed"></td>
            <td id="RPStimesPlayed"></td>
            <td id="BOtimesPlayed"></td>
            
        </tr>
        <tr>
            <th>Рекорд</th>
            <td id="CWbestScore"></td>
            <td> - </td>
            <td id="BObestScore"></td>        
            
        </tr>
        <tr>
            <th>Рекордний рівень</th>
            <td> - </td>
            <td> - </td>
            <td id="BObestLevel"></td>

        </tr>
        <tr>
            <th>Перемог</th>
            <td> - </td>
            <td id="RPSwins"></td>
            <td> - </td>

        </tr>
        <tr>
            <th>Нічиїх</th>
            <td> - </td>
            <td id="RPSdraws"></td>
            <td> - </td>

        </tr>
        <tr>
            <th>Поразок</th>
            <td> - </td>
            <td id="RPSloses"></td>
            <td> - </td>

        </tr>
    </table>
</div>
<div id="stat-div">
    <h1>Країни, які Ви вже вакцинували</h1>
    <table class="stat-table" id="countriesTable">
        <tr>
            <th>Країна</th>
            <th>Дата</th>
        </tr>
    </table>
    <div id="vaccine-line-container" class="main-vaccine">
        <span id="vaccine-line"></span>
        <span class="vaccine-line-title">Ви вакцинировали <span id="vaccine-value"></span>% населення країни <span id="countrySpan"></span></span>
    </div>
</div>

<div class="achivment-container, main-achivment">
    <h1>Ваши запаси</h1>
    <table class="achivment-table">
        <tr>
            
            <th>В наявності</th>
            <th>Предмет</th>
            <th>Ціна вакцини</th>
        </tr>
        <tr>
            
            <td><span id="tp"></span></td>
            <td>
                <img src="images/tp.png" height="50px" id="tp" class="achivment-img">
            </td>
            <td>5</td>
        </tr>
        <tr>
            
            <td><span id="msk"></span></td>
            <td>
                <img src="images/msk.png" height="50px" id="msk" class="achivment-img">
            </td>
            <td>3</td>
            
        </tr>
        <tr>
            
            <td><span id="an"></span></td>
            <td>
                <img src="images/an.png" height="50px" id="an" class="achivment-img">
            </td>
            <td>1</td>
        </tr>
    </table>

</div>
<div class="stat-div">
    <h1>Ваш профіль</h1>
    <p>Никнейм: <span id="name"></span></p>
    <p>Рівень: <span id="level"></span></p>
    <button class="start" onclick="setName('change')">Змінити нікнейм</button>
</div>
</div>

<script type="text/javascript">

    $(window).scroll(function(e){
    
    let windowWidth = window.innerWidth*3+20;
    let proscrolleno = $(window).scrollTop();
    
    if  (proscrolleno<=windowWidth-20) { 
             
    //console.log('windowWidth '+windowWidth);    //(window.innerWidth*0.0012);
        
       // console.log('proscrolleno '+proscrolleno);
        /*
        console.log('hdiv1 top '+$('#hdiv1').css('top'))
        console.log('hdiv1 height '+$('#hdiv1').css('height'));
        */
        let hdivs = document.querySelectorAll('.hdiv');
        hdivs.forEach(item => {
            //console.log(item.id, item.offsetLeft+item.clientWidth);
            //console.log(window.innerWidth);
            let k = 0;
            if (window.innerWidth>720) {
                k=300
            } else {
                k=120
            }
            if (item.offsetLeft +item.clientWidth< k) {
                item.style.opacity = 0;
            } else {
                item.style.opacity = 1;
            }
        })
       
        $('#header').css({
            'height': `calc(100vh + ${proscrolleno}px)`
        })
        
        $('#hdiv1').css({
            'left':  `-${proscrolleno}px` ,
             //'height': `calc(100vh + ${proscrolleno*1.2}px)`,
            
        })
        $('#hdiv2').css({
           
            'left':  `calc(100vw - ${proscrolleno}px)` ,
           
        })
        $('#hdiv3').css({
           // 'height': `calc(100vh + ${proscrolleno*1.2}px)`,
            'left':  `calc(200vw - ${proscrolleno}px)` ,
            
           
         
        })
        $('#hdiv4').css({
            //'height': `calc(100vh + ${proscrolleno*1.2}px)`,
            'left':  `calc(300vw - ${proscrolleno}px)` ,
            'top':  0 ,
            
          
        })
        $('.main').css({
            'top':  `calc(100vh + ${proscrolleno}px)` ,
            'left': 0
        })
            
    }  else  { 
        $('#hdiv4').css({
            'top':  `-${proscrolleno - windowWidth}px` ,
            'left':  `0` ,
        });
        $('.main').css({
            'left':  `0` ,
            
        })
    
    }
    
    })
/*
    $('#color-words').mouseover(()=>{
        $('#color-words-description').fadeIn(300);
        $('#color-words-description').css({
            'transform':'tranlateY(0)'
        });
        
    });
   
    $('#color-words').mouseout(()=>{
        $('#color-words-description').fadeOut(300);
        $('#color-words-description').css({
            'transform':'tranlateY(-30vh)'
        });
        
    }) 
    */
</script>

<script>
    const BObestScore = document.getElementById('BObestScore');
const BOtimesPlayed = document.getElementById('BOtimesPlayed');
const CWbestScore = document.getElementById('CWbestScore');
const CWtimesPlayed = document.getElementById('CWtimesPlayed');
const BObestLevel = document.getElementById('BObestLevel');
const RPStimesPlayed = document.getElementById('RPStimesPlayed');
const RPSwins = document.getElementById('RPSwins');
const RPSdraws = document.getElementById('RPSdraws');
const RPSloses = document.getElementById('RPSloses');
const tp = document.getElementById('tp');
const an = document.getElementById('an');
const msk = document.getElementById('msk');
const playerLevel = document.getElementById('level');
const playerName = document.getElementById('name');
const vaccineValSpan = document.getElementById('vaccine-value');
const vaccineLine = document.getElementById('vaccine-line');
const countrySpan = document.getElementById('countrySpan');
let countries = [
"Австралія",
'Австрія',
'Азербайджан',
'Албанія',
'Алжир',
'Ангола',
'Андорра',
'Антигуа і Барбуда',
'Аргентина',
'Вірменія' ,
'Аруба',
'Афганістан',
'Багами' ,
'Бангладеш',
'Барбадос',
'Бахрейн',
'Білорусь',
'Беліз',
'Бельгія',
'Бенін',
'Бермудські острови' ,
'Болгарія',
'Болівія',
'Боснія і Герцеговина' ,
'Ботсвана',
'Бразилія',
'Бруней-Даруссалам',
'Буркіна Фасо',
'Бурунді',
'Бутан',
'Вануату',
'Ватикан',
'Великобританія',
'Угорщина' ,
'Венесуела',
"В'єтнам",
'Габон',
'Гавайські острови' ,
'Гайана',
'Гаїті',
'Гамбія',
'Гана',
'Гваделупа',
'Гватемала',
'Гвінея',
'Гвінея-Біссау',
'Німеччина' ,
'Гондурас',
'Гонконг',
'Гренада',
'Греція',
'Грузія',
'Данія' ,
'Джибуті',
'Домініка',
'Домінікана',
'Єгипет',
'Замбія',
'Зімбабве',
'Ізраїль',
'Індія',
'Індонезія',
'Йорданія',
'Ірак',
'Іран',
'Ірландія',
'Ісландія',
'Іспанія',
'Італія',
'Ємен',
'Кабо-Верде' ,
'Казахстан',
'Кайманові острови',
'Камбоджа',
'Камерун',
'Канада',
'Канарські острови'    ,
'Катар',
'Кенія',
'Кіпр',
'Киргизія',
'Кірибаті',
'Китай' ,
'Колумбія',
'Комори' ,
'Конго',
'Конго-Кіншаса',
'Коста-Ріка',
"Кот-д'Івуар",
'Куба',
'Кувейт',
'Лаос',
'Латвія',
'Лесото',
'Ліберія',
'Ліван',
'Лівія',
'Литва' ,
'Ліхтенштейн',
'Люксембург',
'Маврикій',
'Мавританія',
'Мадагаскар',
'Малаві',
'Малайзія',
'Малі',
'Мальдіви',
'Мальта',
'Марокко',
'Мартініка',
'Маршаллові острови',
'Мексика',
'Мозамбік',
'Молдова',
'Монако',
'Монголія',
"М'янма",
'Намібія',
'Науру',
'Непал',
'Нігер',
'Нігерія',
'Нідерланди',
'Нікарагуа',
'Нова Зеландія' ,
'Норвегія',
'ОАЕ',
'Оман',
'Острів Св. Олени',
'Пакистан' ,
'Палау',
'Панама',
'Папуа Нова Гвінея' ,
'Парагвай' ,
'Перу',
'Польща',
'Португалія',
'Пуерто-Ріко' ,
'Реюньйон',
'Росія' ,
'Руанда',
'Румунія',
'Сальвадор',
'Самоа',
'Сан-Марино',
'Сан-Томе і Прінсіпі',
'Саудівська Аравія' ,
'Свазіленд',
'КНДР',
'Північна Македонія',
'Сейшелі',
'Сенегал',
'Сен-Мартен',
'Сент-Вінсент і Гренадини' ,
'Сент-Кітс і Невіс',
'Сент-Люсія',
'Сербія',
'Сінгапур',
'Сирія',
'Словаччина',
'Словіння',
'Соломонові острови',
'Сомалі',
'Судан',
'Суринам',
'США' ,
'Сьєрра-Леоне' ,
'Таджикистан',
'Тайвань',
'Тайланд',
'Танзанія',
'Того',
'Тонга',
'Трінідад і Тобаго' ,
'Тувалу',
'Туніс',
'Туркменістан',
'Туреччина'  ,
'Уганда',
'Узбекистан',
'Україна' ,
'Уолліс і Футуна',
'Уругвай',
'Фіджі',
'Філіппіни' ,
'Фінляндія',
'Франція',
'Хорватія',
'Центральноафриканська Республіка' ,
'Чад',
'Чорногорія',
'Чехія',
'Чилі',
'Швейцарія',
'Швеція',
'Шрі Ланка' ,
'Еквадор',
'Екваторіальна Гвінея' ,
'Ерітрея',
'Естонія',
'Ефіопія',
'ПАР',
'Південна Корея',
"Ямайка",
"Японія"
]
let completeCountries = []; 

if (localStorage.tp == null) {
    localStorage.setItem('tp', 0);
} 
if (localStorage.msk == null) {
    localStorage.setItem('msk', 0);
} 
if (localStorage.an == null) {
    localStorage.setItem('an', 0);
} 
if (localStorage.vaccine == null) {
    localStorage.setItem('vaccine', 0);
} 
if (sessionStorage.RPSwinsStraight == null) {
    sessionStorage.setItem('RPSwinsStraight',0);
}
if (localStorage.CWtimesPlayed == null) {
    localStorage.setItem('CWtimesPlayed', 0);
} 
if (localStorage.CWbestScore== null) {
        localStorage.setItem('CWbestScore', 0);
} 
if (localStorage.BOtimesPlayed == null) {
    localStorage.setItem('BOtimesPlayed', 0);
} 
if (localStorage.BObestScore== null) {
    localStorage.setItem('BObestScore', 0);
} 
if (localStorage.BObestLevel== null) {
    localStorage.setItem('BObestLevel', 1);
}
if (localStorage.themeMax== null) {
    localStorage.setItem('themeMax', 115);
}
if (localStorage.themeMin== null) {
    localStorage.setItem('themeMin', 25);
}  
if (localStorage.themeBg== null) {
    localStorage.setItem('themeBg', 'rgba(255, 255, 255, .5)');
}
if (localStorage.RPStimesPlayed == null) {
    localStorage.setItem('RPStimesPlayed', 0);
} 
if (localStorage.RPSdraws== null) {
    localStorage.setItem('RPSdraws', 0);
} 
if (localStorage.RPSwins == null) {
    localStorage.setItem('RPSwins', 0);
} 
if (localStorage.RPSloses== null) {
    localStorage.setItem('RPSloses', 0);
} 
if (localStorage.playerLevel == null) {
    localStorage.setItem('playerLevel',1);
}

if (localStorage.countries == null) {
    localStorage.setItem('countries', '[]');    
}
if (localStorage.curCountry == null) {
    localStorage.setItem('curCountry', decideRandomCounty(countries));  
}
if (localStorage.allCountries == null) {
    localStorage.setItem('allCountries', JSON.stringify(countries));    
}

if (localStorage.playerName == null || localStorage.playerName == undefined) {
    setName('first');
}
function random(arr){
    let n = Math.floor(Math.random()*(arr.length));
    return arr[n]
}


//let date = new Date();

function decideRandomCounty(arr) {
    let randomCountry = random(arr); 
    arr.splice(arr.indexOf(randomCountry), 1);
    return randomCountry
} 

function setName(reason) {
    let name = "Гравець";
    if (reason=="first") {
        name = prompt(`Вітаємо в CORONA GAMES! Бачу, Ви тут вперше? Оберіть Ваш нікнейм перед тим як почати грати. За замовчуванням встановлено нікнейм "Гравець", але Ви можете змінити його у будь-який час на головній сторінці.`);
        if (name===null || name==" "|| name=="") {
            name="Гравець"
        }
        localStorage.setItem('playerName', name)
    } else {
        let prevName = localStorage.playerName;
        name = prompt(`Введіть нікнейм, який хочете встановити`);
        if (name===null || name==" "|| name=="") {
            name=prevName;
        }
        localStorage.playerName = name;
    }
    updateStatTableInners()
}
function updateStatTableInners(){
    fillCountriesTable();
    CWbestScore.innerHTML = localStorage.CWbestScore; 
    CWtimesPlayed.innerHTML = localStorage.CWtimesPlayed; 
    RPStimesPlayed.innerHTML = localStorage.RPStimesPlayed; 
    RPSwins.innerHTML = localStorage.RPSwins;
    RPSdraws.innerHTML = localStorage.RPSdraws; 
    RPSloses.innerHTML = localStorage.RPSloses;
    BObestScore.innerHTML = localStorage.BObestScore; 
    BObestLevel.innerHTML = localStorage.BObestLevel;
    BOtimesPlayed.innerHTML = localStorage.BOtimesPlayed; 
    tp.innerHTML = localStorage.tp;
    msk.innerHTML = localStorage.msk;
    an.innerHTML = localStorage.an;
    playerLevel.innerHTML = localStorage.playerLevel+' рів.';
    playerName.innerHTML = localStorage.playerName;
    vaccineValSpan.innerHTML= localStorage.vaccine;
    vaccineLine.style.width = `${localStorage.vaccine}%`;
    countrySpan.innerHTML = localStorage.curCountry;
}


function fillCountriesTable() {
    let countries = JSON.parse(localStorage.countries);
    let tbody = document.querySelector('#countriesTable');
    
    countries.forEach(item => {
        let tr = document.createElement('tr');
        let td1 = document.createElement('td');
        td1.innerHTML = item.country;
        let td2 = document.createElement('td');
        td2.innerHTML = item.date;
        tr.appendChild(td1);
        tr.appendChild(td2);
        tbody.appendChild(tr)
    })
}

window.onload = updateStatTableInners;

</script>

</body>
</html>
